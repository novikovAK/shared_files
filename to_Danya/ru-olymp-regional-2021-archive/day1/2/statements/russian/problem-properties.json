{"scoring":"Баллы за каждую подзадачу начисляются только в случае, если все тесты для этой\r\nподзадачи и необходимых подзадач успешно пройдены.\r\n\r\n\\begin{center}\r\n\\renewcommand{\\arraystretch}{1.3}\r\n\\begin{tabular}{|c|c|c|c|c|}\r\n\\hline\r\n\\textbf{Подзадача} & \r\n\\textbf{Баллы} & \r\n\\textbf{Ограничения} & \r\n\\parbox{3cm}{\\textbf{\\centering\\\\Необходимые\\\\подзадачи\\\\\\vspace{2mm}}} & \r\n\\parbox{3cm}{\\textbf{\\centering\\\\Информация\\\\о проверке\\\\\\vspace{2mm}}} \r\n\\\\ \\hline\r\n1 & 20 & $t = 1$, $1 \\le n, m \\le 100$ &  & полная \\\\ \\hline\r\n2 & 14 & $t = 1$, $1 \\le n, m \\le 2\\,000$ & 1 & первая ошибка \\\\ \\hline\r\n3 & 15 & $t = 1$, $1 \\le n, m \\le 10^7$ & 1, 2 & первая ошибка \\\\ \\hline\r\n4 & 16 & $1 \\le t \\le 1\\,000$, $1 \\le n \\times m \\le 10\\,000$ & 1 & первая ошибка \\\\ \\hline\r\n5 & 15 & $1 \\le t \\le 100\\,000$, $n = 1$, $1 \\le m \\le 10^9$ & & первая ошибка \\\\ \\hline\r\n6 & 20 & $1 \\le t \\le 100\\,000$, $1 \\le n, m \\le 10^9$ & 1--5 & первая ошибка \\\\ \\hline\r\n\\end{tabular}\r\n\r\n\\end{center}","notes":"","legend":"Рассмотрим таблицу из $n$ строк и $m$ столбцов, в клетки которой по строкам записаны числа от~$1$ до~$n \\cdot m$. Сначала заполняется первая строка слева направо, затем вторая, и так далее. Другими словами в клетку $(r, c)$ записано число $(r - 1) \\cdot m + c$. \r\n\r\nНа рисунке приведен пример такой таблицы для $n = 3$, $m = 5$.\r\n\r\n\\begin{center}\r\n\\begin{tabular}{|c|c|c|c|c|}\r\n\\hline\r\n1&2&3&4&5\\\\\r\n\\hline\r\n6&7&8&9&10\\\\\r\n\\hline\r\n11&12&13&14&15\\\\\r\n\\hline\r\n\\end{tabular}\r\n\\end{center}\r\n\r\nТребуется разделить таблицу одним вертикальным или горизонтальным разрезом, проходящим по сторонам клеток, так чтобы сумма чисел в получившихся частях таблицы отличалась как можно меньше. В этой задаче в одном тесте вам придётся ответить на несколько запросов об оптимальном разрезании таблицы.","authorLogin":"imka","language":"russian","timeLimit":1000,"output":"В $t$ строках выведите ответы на запросы, по одному на строке. \r\n\r\nОтвет на каждый запрос должен быть выведен в формате <<\\texttt{D $x$}>>, где \\t{D}~--- это <<\\texttt{V}>>, если нужно резать по вертикали, <<\\texttt{H}>>~--- если по горизонтали, а $x$~--- номер столбца или строки, перед которым надо сделать разрез.\r\nСтроки пронумерованы от $1$ до $n$, столбцы пронумерованы от $1$ до $m$.\r\n\r\nЕсли правильных ответов несколько, то надо вывести вариант с вертикальным разрезом, если он есть, а если и после этого вариантов несколько, то из вариантов с различными $x$ следует выбрать тот, в котором $x$ меньше.","inputFile":"stdin","outputFile":"stdout","input":"В первой строке ввода задано целое число $t$~--- количеcтво запросов ($1 \\le t \\le 10^5$). \r\n\r\nВ следующих $t$ строках заданы по два числа $n$, $m$ ($1 \\le n, m \\le 10^9$, $2 \\le n \\times m \\le 10^9$).","authorName":"Dima Gnatyuk","sampleTests":[{"output":"V 3\r\nV 5\r\nV 8\r\nH 3\r\nV 4\r\n","input":"5\r\n1 3\r\n4 7\r\n1 10\r\n3 3\r\n3 5\r\n","inputFile":"example.01","outputFile":"example.01.a"}],"name":"Разбиение таблицы","interaction":null,"memoryLimit":536870912,"tutorial":"\\medskip\r\n\\textit{Автор задачи: Даниил Орешников}\r\n\\medskip\r\n\r\n\\subsection*{Подзадача 1}\r\nПереберем линию разделения. Затем за $n \\cdot m$ посчитаем сумму в разделенной таблице. Выберем лучший разрез. В сумме решение работает за $n \\cdot m \\cdot (n + m)$.\r\n\r\n\\subsection*{Подзадача 2}\r\nЗаметим, что при перемещении линии разреза на $1$ в каждой из половин добавляется или удаляется только $O(n)$ или $O(m)$ клеток. Значит можно перебрать все варианты за $O(nm)$.\r\n\r\n\\subsection*{Подзадачи 3 и 4}\r\nЗафиксируем какой-нибудь разрез по вертикале перед столбцом $k$, посчитаем сумму в полученном прямоугольнике, используя сумму арифметической прогрессии:\r\n\r\n$$a_1 + a_2 + a_3 + \\ldots + a_x = \\frac{(a_1 + a_x)}{2} \\cdot x$$\r\n\r\nПрименяя, получаем:\r\n$$1 + 2 + \\ldots + k + (m + 1) + (m + 2) + \\ldots + (m + k) + \\ldots + (m \\cdot (n - 1) + 1) + (m \\cdot (n - 1) + 2) + \\ldots + (m \\cdot (n - 1) + k)=$$\r\n\r\n$$=\\frac{1 + k}{2} \\cdot k + \\frac{(m + 1) + (m + k))}{2} \\cdot k + \\ldots + \\frac{((m \\cdot (n - 1) + 1) + (m \\cdot (n - 1) + k)}{2} \\cdot k$$\r\n\r\n\r\nПолученная сумма также является арифметической прогрессией с шагом $m \\cdot k$, значит она равна:\r\n\r\n$$\\frac{\\frac{1 + k}{2} \\cdot k + \\frac{((m \\cdot (n - 1) + 1) + (m \\cdot (n - 1) + k)}{2} \\cdot k}{2} \\cdot n$$\r\n\r\nCумму в горизонтальном разрезе найдем по более простой формуле:\r\n\r\n$$1 + 2 + \\ldots + m + (m + 1) + (m + 2) + \\ldots + (m + m) + \\ldots + (m \\cdot (k - 1) + 1) + (m \\cdot (k - 1) + 2) + \\ldots + (m \\cdot (k - 1) + m)$$\r\n\r\n$$\\frac{1 + m \\cdot k}{2} \\cdot mk$$\r\n\r\nТаким образом, за $O(1)$ можно посчитать сумму при фиксированном разрезе, а значит, можно найти лучший разрез за $(n + m)$.\r\n\r\n\\subsection*{Подзадача 5}\r\nЗдесь арифметическая програссия одномерная и надо найти такое $k$, чтобы  \r\n\r\n$$\\frac{1 + k}{2} \\cdot k \\approx \\frac{1 + m}{4} \\cdot m$$\r\n\r\n\\subsubsection*{Решение 1}\r\nУпрощая, получим квадратное уравнение на $k$, и найдем лучшее $k$ за $O(1)$. Из-за округлений возможна погрешность, поэтому нужно перебрать ответ в диапазоне $\\pm 1$.\r\n\\subsubsection*{Решение 2} \r\nМожно найти лучшее $k$, используя двоичный поиск (сумма первых $k$ значений возрастает при увеличении $k$).\r\n\r\n\\subsection*{Подзадача 6}\r\nСовместим идеи в подзадачах 4 и 5:\r\nПосчитаем сумму при фиксированной границе раздела:\r\n\r\n$$\\frac{\\frac{1 + k}{2} \\cdot k + \\frac{((m \\cdot (n - 1) + 1) + (m \\cdot (n - 1) + k)}{2} \\cdot k}{2} \\cdot n \\approx \\frac{1 + n \\cdot m}{4} \\cdot nm$$\r\n\r\n\\subsubsection*{Решение 1 за $O(1)$ на запрос}\r\nУпрощая, получим квадратное уравнение на $k$, и найдем лучшее $k$ с точностью до $\\pm 1$, так как знак приблизительно равно. \r\n\r\n\\subsubsection*{Решение 2 за $\\log_2{max(n, m)}$ на запрос} \r\nМожно найти лучшее $k$, используя двоичный поиск, так как значение слева возрастает, при увеличении $k$."}